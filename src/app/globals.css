@import "tailwindcss";

/* Tailwind CSS v4 需要显式声明暗色模式变体 */
@custom-variant dark (&:where(.dark, .dark *));

/* 设计稿语义颜色配置 */
@theme {
  --color-primary: #3b82f6;
  --color-background-light: #f8fafc;
  --color-background-dark: #0f172a;
  --color-card-light: #ffffff;
  --color-card-dark: #1e293b;
  --color-text-main-light: #1e293b;
  --color-text-main-dark: #f1f5f9;
  --color-text-muted-light: #64748b;
  --color-text-muted-dark: #94a3b8;
  --color-border-light: #e2e8f0;
  --color-border-dark: #334155;
}

:root {
  --background: #f8fafc;
  --foreground: #1e293b;
  --header-height: 3rem;
}

/* 滚动条样式 */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background-color: #cbd5e1;
  border-radius: 20px;
}

.dark ::-webkit-scrollbar-thumb {
  background-color: #475569;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0f172a;
    --foreground: #f1f5f9;
  }
}

/* 暗色模式类覆盖 */
.dark {
  --background: #0f172a;
  --foreground: #f1f5f9;
}

body {
  background: var(--background);
  color: var(--foreground);
}

/* 加载动画点 */
.loading-dots {
  animation: dots 1.5s infinite;
}

@keyframes dots {
  0%, 20% {
    content: '.';
  }
  40% {
    content: '..';
  }
  60%, 100% {
    content: '...';
  }
}

/* 系统字体配置: 优先使用各平台最佳字体 */
@layer base {
  html {
    /* 英文优先: San Francisco (macOS) -> Segoe UI (Windows) -> Roboto (Android) */
    /* 中文优先: PingFang SC (macOS) -> Microsoft YaHei (Windows) -> Noto Sans (Android) */
    font-family:
      /* 系统默认英文 */
      -apple-system,
      BlinkMacSystemFont,
      "Segoe UI",
      /* macOS 英文 */
      "San Francisco",
      "Helvetica Neue",
      /* Windows 英文 */
      "Segoe UI",
      /* Android 英文 */
      Roboto,
      /* 通用英文 */
      Helvetica,
      Arial,
      /* macOS 中文 */
      "PingFang SC",
      "Hiragino Sans GB",
      /* Windows 中文 */
      "Microsoft YaHei",
      "微软雅黑",
      /* Android 中文 */
      "Noto Sans SC",
      /* 降级 */
      sans-serif,
      /* Emoji */
      "Apple Color Emoji",
      "Segoe UI Emoji",
      "Segoe UI Symbol",
      "Noto Color Emoji";
  }

  code,
  pre,
  kbd,
  samp {
    font-family:
      /* macOS 等宽 */
      "SF Mono",
      "Monaco",
      /* Windows 等宽 */
      "Cascadia Code",
      "Consolas",
      /* Linux 等宽 */
      "Ubuntu Mono",
      /* 通用等宽 */
      "Courier New",
      monospace;
  }
}

/* Header 样式 */
.header {
  height: var(--header-height);
  box-shadow: 0 1px 3px rgb(18 18 18 / 10%);
  width: 100%;
  z-index: 50;
  transition: opacity 0.3s;
}

.header:hover {
  opacity: 1 !important;
}

.header .menu .category {
  line-height: var(--height);
  font-size: 16px;
}

.header .menu .category ul li a.router-link-exact-active,
.header .menu .category ul li a[aria-current="page"] {
  position: relative;
}

.header .menu .category ul li a.router-link-exact-active::after,
.header .menu .category ul li a[aria-current="page"]::after {
  position: absolute;
  bottom: 0;
  left: 0;
  content: "";
  width: 100%;
  height: 1px;
}

/* DocSearch 暗色模式样式 */
.dark .DocSearch {
  --docsearch-text-color: #f5f6f7;
  --docsearch-container-background: rgba(9, 10, 17, 0.8);
  --docsearch-modal-background: #15172a;
  --docsearch-modal-shadow: inset 1px 1px 0 0 #2c2e40, 0 3px 8px 0 #000309;
  --docsearch-searchbox-background: #090a11;
  --docsearch-searchbox-focus-background: #000;
  --docsearch-hit-color: #bec3c9;
  --docsearch-hit-shadow: none;
  --docsearch-hit-background: #090a11;
  --docsearch-key-gradient: linear-gradient(-26.5deg, #565872, #31355b);
  --docsearch-key-shadow: inset 0 -2px 0 0 #282d55, inset 0 0 1px 1px #51577d, 0 2px 2px 0 rgba(3, 4, 9, 0.3);
  --docsearch-footer-background: #1e2136;
  --docsearch-footer-shadow: inset 0 1px 0 0 rgba(73, 76, 106, 0.5), 0 -4px 8px 0 rgba(0, 0, 0, 0.2);
  --docsearch-logo-color: #fff;
  --docsearch-muted-color: #7f8497;
}

.dark .DocSearch .DocSearch-Button .DocSearch-Button-Key {
  box-shadow: unset;
}

.md-editor-preview .md-editor-code .md-editor-code-head {
  z-index: 20 !important;
  top: var(--header-height) !important;
}